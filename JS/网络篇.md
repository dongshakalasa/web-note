# 一、HTTP协议

## 1、HTTP协议介绍

基本介绍：

- HTTP（Hyper Text Transfer Protocol）： 全称超文本传输协议，是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。
- HTTP 是一种应用层协议，是基于 TCP/IP 通信协议来传递数据的，其中 HTTP1.0、HTTP1.1、HTTP2.0 均为 TCP 实现，HTTP3.0 基于 UDP 实现。现主流使用 HTTP1.0 和 HTTP3.0
- 协议： 为了使数据在网络上从源头到达目的，网络通信的参与方必须遵循相同的规则，这套规则称为协议，它最终体现为在网络上传输的数据包的格式。

> 通俗点讲，协议就是要保证网络通信的双方，能够互相对接上号。就像是两个人传递纸条通过互相指定的暗号，如果发送天亮了，表示可以打游戏了等等

**注意：** 当我们访问一些网页时，是显示通过 HTTPS 来进行通信的，并且当下大多数的网页都是通过 HTTPS 来进行通信的，因为 HTTPS 在 HTTP 的基础上做了一个加密的工作。HTTPS 将在本章节末尾具体介绍

## 2. HTTP 协议的工作过程

​		当我们在浏览器输入一个网址，此时浏览器就会给对应的服务器发送一个 HTTP 请求，对应的服务器收到这个请求之后，经过计算处理，就会返回一个 HTTP 响应。并且当我们访问一个网站时，可能涉及不止一次的 HTTP 请求和响应的交互过程。

**基础术语：**

- **客户端：** 主动发起网络请求的一端
- **服务器：** 被动接收网络请求的一端
- **请求：** 客户端给服务器发送的数据
- **响应：** 服务器给客户端返回的数据

**HTTP 协议的重要特点：** 一发一收，一问一答

![image-20220303134211242](截图\特点图示)

**注意：** 网络编程中，除了一发一收之外，还有其它的模式

- 多发一收：例如上传大文件
- 一发多收：例如看直播时，搜索一个词条可以得到多个视频源
- 多发多收：例如串流（steam link、moonlight 等等）

## 3、Fiddler 抓包工具介绍

## 3.1 抓包工具的使用

​		当我们访问一个网站时，可能涉及不止一次的 HTTP 请求和响应的交互，为此为了更加清楚的了解我们访问一个网站时 HTTP 请求/协议是怎么交互的，由于 HTTP 是一个文本格式的协议，就可以通过以下两种方式

# 一、Ajax的诞生

​		2005年，Jesse James Garrett撰写了一篇文章《Ajax - A New Approach to Web Applications》，这篇文章中描绘了一个被称为Ajax（Asynchronous JavaScript+XML，即异步JavaScript+XML）的技术。这个技术涉及发送服务器请求额外数据而不刷新页面，从而实现更好地用户体验。Garrett解释了这个技术怎样改变自Web诞生以来就一直延续的传统单击等待的模式。
​		把Ajax推到历史舞台上的关键技术是XMLHttpRequest（XHR）对象。在XHR出现之前，Ajax风格的通信必须通过一些黑科技实现，主要是使用隐藏的窗格或内嵌窗格。XHR为发送服务器请求和获取相应提供了合理的接口。这个接口可以实现异步从服务器获取额外数据，意味着用户不用页面刷新也可以获取数据。通过XHR对象获取数据后，可以使用DOM方法把数据插入网页。
​		XHR对象的API被普遍认为比较难用，而Fetch API自动诞生以后迅速成为了XHR更现代的替代标准，Fetch API支持期约promise和服务线程（service worker），已经成为及其强大的Web开发工具。

# 二、跨资源共享

​		通过XHR进行Ajax通信的一个主要限制是跨源安全策略。默认情况下，XHR只能访问与发起请求的页面在同一域内的资源。这个安全限制可以防止某些恶意行为。不过，浏览器也需要支持合法跨源访问的能力。
跨源资源共享（CORS，Cross-Origin Rerource Sharing）定义了浏览器与服务器如何实现跨源通信。CORS背后的基本思路就是使用自定义的HTTP头部允许浏览器和服务器相互了解，以确定请求或相应应该成功还是失败。
​		对于简单的请求，比如GET或POST请求，没有自定义头部，而且请求体是text/plain类型，这样的请求在发送时会有一个额外的头部叫Origin。Origin头部包含发送请求的页面的源（协议、域名、端口），以便服务器确定是否为其提供响应。
​		现代浏览器通过XMLHttpRequst对象原生支持CORS，在尝试访问不同源的资源时，这个行为会被自动触发。要向不同域的源发送请求，可以使用标准XHR对象并给open()方法传入一个绝对URL，比如：

# 三、预检请求

# 四、Fetch API

# 五、websocket